---
title: Quick Start
description: Get started with Ventyd in 5 steps
---

# Quick Start

This guide will walk you through creating your first event-sourced entity with Ventyd.

## 1. Define Your Schema

Define your entity schema with events and state. This example uses Valibot:

```typescript
import { defineSchema } from 'ventyd';
import { valibot, v } from 'ventyd/valibot';

const userSchema = defineSchema("user", {
  schema: valibot({
    event: {
      created: v.object({
        nickname: v.string(),
        email: v.pipe(v.string(), v.email()),
      }),
      profile_updated: v.object({
        nickname: v.optional(v.string()),
        bio: v.optional(v.string()),
      }),
      deleted: v.object({
        reason: v.optional(v.string()),
      }),
      restored: v.object({}),
    },
    state: v.object({
      nickname: v.string(),
      email: v.pipe(v.string(), v.email()),
      bio: v.optional(v.string()),
      deletedAt: v.optional(v.nullable(v.string())),
    }),
  }),
  initialEventName: "user:created", // Event that creates new entities
});
```

## 2. Create a Reducer

The reducer determines how events transform the entity state:

```typescript
import { defineReducer } from 'ventyd';

const userReducer = defineReducer(userSchema, (prevState, event) => {
  switch (event.eventName) {
    case "user:created":
      return {
        nickname: event.body.nickname,
        email: event.body.email,
        bio: undefined,
        deletedAt: null,
      };

    case "user:profile_updated":
      return {
        ...prevState,
        ...(event.body.nickname && { nickname: event.body.nickname }),
        ...(event.body.bio !== undefined && { bio: event.body.bio }),
      };

    case "user:deleted":
      return {
        ...prevState,
        deletedAt: event.eventCreatedAt,
      };

    case "user:restored":
      return {
        ...prevState,
        deletedAt: null,
      };

    default:
      return prevState;
  }
});
```

## 3. Create Your Entity Class

Create an entity class with business logic:

```typescript
import { Entity, mutation } from 'ventyd';

class User extends Entity(userSchema, userReducer) {
  get nickname() {
    return this.state.nickname;
  }

  get isDeleted() {
    return this.state.deletedAt !== null;
  }

  updateProfile = mutation(this, (dispatch, updates: { nickname?: string; bio?: string }) => {
    if (this.isDeleted) {
      throw new Error("Cannot update profile of deleted user");
    }
    dispatch("user:profile_updated", updates);
  });

  delete = mutation(this, (dispatch, reason?: string) => {
    if (this.isDeleted) {
      throw new Error("User is already deleted");
    }
    dispatch("user:deleted", { reason });
  });

  restore = mutation(this, (dispatch) => {
    if (!this.isDeleted) {
      throw new Error("User is not deleted");
    }
    dispatch("user:restored", {});
  });
}
```

## 4. Set Up Repository

Create a repository with an adapter:

```typescript
import { createRepository } from 'ventyd';
import type { Adapter } from 'ventyd';

// In-memory adapter for development
const createInMemoryAdapter = (): Adapter => {
  const eventStore: any[] = [];

  return {
    async getEventsByEntityId({ entityName, entityId }) {
      return eventStore.filter(e =>
        e.entityName === entityName &&
        e.entityId === entityId
      );
    },
    async commitEvents({ events }) {
      eventStore.push(...events);
    }
  };
};

const userRepository = createRepository(User, {
  adapter: createInMemoryAdapter()
});
```

## 5. Use Your Event-Sourced Entity

```typescript
// Create a new user
const user = User.create({
  body: {
    nickname: "JohnDoe",
    email: "john@example.com",
  }
});

// Update the user's profile
user.updateProfile({
  bio: "Software Engineer"
});

// Persist events to storage
await userRepository.commit(user);

// Retrieve and reconstruct the user from events
const retrievedUser = await userRepository.findOne({
  entityId: user.entityId
});

console.log(retrievedUser?.nickname); // "JohnDoe"
console.log(retrievedUser?.bio); // "Software Engineer"

// You can also load an entity from existing state (read-only)
const loadedUser = User.load({
  entityId: "user-123",
  state: {
    nickname: "ExistingUser",
    email: "existing@example.com",
    bio: "Loaded from database"
  }
});
```

## Next Steps

Now that you have a basic understanding of Ventyd, you can:

- Learn more about [Core Concepts](/docs/core-concepts)
- Explore [Validation Libraries](/docs/validation-libraries)
- Set up [Storage Adapters](/docs/storage-adapters)
- Extend functionality with [Plugins](/docs/plugins)
- Follow [Best Practices](/docs/best-practices)
